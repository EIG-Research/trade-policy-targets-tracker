hovertemplate = "%{x}: %{y:$,.1f}B<extra></extra>"
) %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Construction Spending (Billions of Dollars)",
tickformat = ",.0f",
ticksuffix = ""),
# add target line
shapes = list(
list(
type = "line",
xref = "paper",
x0 = 0, x1 = 1,
y0 = y_lvl, y1 = y_lvl,
line = list(color = eig_colors[4], width = 2, dash = "dash")
)
),
# label for target
annotations = list(
list(
xref = "paper",
x = 0.4,
y = y_lvl+1,
text = paste0("Q4 2024 level: ",round(y_lvl,1),"B"),
showarrow = FALSE,
font = list(color = eig_colors[4], size = 14),
xanchor = "left",
yanchor = "middle"
)
),
legend = list(title = list(text = "Manufacturing Value Added")),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1])
)
})
output$text_const <- renderUI({
HTML('<p>The Trump administration has <href ="https://ustr.gov/sites/default/files/files/reports/2025/President%20Trump%27s%202025%20Trade%20Policy%20Agenda.pdf" target="_blank">bemoaned</a> that “over 100,000 factories closed between 1997 and 2016.” President Trump has also <a href="https://www.nytimes.com/2025/04/03/business/economy/trump-tariffs-us-manufacturing-economy.html" target="_blank">said</a> that owing to his new trade policy, “Jobs and factories will come roaring back into our country.”
Spending on factory construction had already climbed steeply in the years before the Trump presidency, so we have set the target at maintaining those high levels.
</p>'
)})
## Industrial Production ##
ind_prod_df <- tibble(
quarter = as.Date(as.yearqtr(time(ipman_qt))),
ip = as.numeric(ipman_qt),
hover_label = format(as.yearqtr(quarter), "%Y Q%q")
)
output$plotly_ind_prod <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
date_range <- range(ind_prod_df$quarter)
start_year <- lubridate::year(date_range[1])
end_year   <- lubridate::year(date_range[2])
# Add ticks
tick_years <- c(start_year,
seq((start_year %/% 5 + 1)*5, end_year %/% 5*5, by = 5))
tick_dates <- c(as.Date(paste0(tick_years, "-01-01")),
tail(date_range, 1)) %>% unique()  # Q1 of each year
tick_texts <- as.character(as.yearqtr(tick_dates))
y_lvl <- ind_prod_df %>% filter(quarter == "2007-10-01") %>% .$ip
plot_ly(
data = ind_prod_df,
x = ~quarter,
y = ~ip,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:.1f}<extra></extra>"
) %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Industrial Production Index",
tickformat = ".0f",
ticksuffix = ""),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1]),
# add target line
shapes = list(
list(
type = "line",
xref = "paper",
x0 = 0, x1 = 1,
y0 = y_lvl, y1 = y_lvl,
line = list(color = eig_colors[4], width = 2, dash = "dash")
)
),
# add label for target
annotations = list(
list(
xref = "paper",
x = 0.02,
y = y_lvl + 2,
text = paste0("2007 Q4 peak, before the Great Financial Crisis = " , round(y_lvl, 1)),
showarrow = FALSE,
font = list(color = eig_colors[4], size = 14),
xanchor = "left",
yanchor = "middle"
)
)
)
})
output$text_ind_prod <- renderUI({
HTML('<p>The Trump administration, in declaring a <a href="https://www.whitehouse.gov/fact-sheets/2025/04/fact-sheet-president-donald-j-trump-declares-national-emergency-to-increase-our-competitive-edge-protect-our-sovereignty-and-strengthen-our-national-and-economic-security/#:~:text=Large%20and%20persistent%20annual%20U.S.,base%20dependent%20on%20foreign%20adversaries." target="_blank">national emergency</a> to justify the use of tariffs, cited the decline in manufacturing output as one of the reasons tariffs are needed. Goods trade deficits “have led to the hollowing out of our manufacturing base; resulted in a lack of incentive to increase advanced domestic manufacturing capacity; undermined critical supply chains; and rendered our defense-industrial base dependent on foreign adversaries.“<br><br>We set the target to be a return to the pre-financial crisis peak of 106.1, which had been reached after a long upward trajectory.</p>'
)})
## Employment rate, native born 16+ ##
emp_pop_ratio_df = tibble(
quarter = as.Date(as.yearqtr(time(emp_pop_ratio_m))),
emp_pop = as.numeric(emp_pop_ratio_m)*100,
hover_label = format(as.yearqtr(quarter), "%Y Q%q")
)
output$plotly_employment_pop_native <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
date_range <- range(emp_pop_ratio_df$quarter)
start_year <- lubridate::year(date_range[1])
end_year   <- lubridate::year(date_range[2])
# Add ticks
tick_years <- c(start_year,
seq((start_year %/% 5 + 2)*5, end_year %/% 5*5, by = 5))
tick_dates <- c(as.Date(paste0(tick_years, "-01-01")),
tail(date_range, 1)) %>% unique()  # Q1 of each year
tick_texts <- as.character(as.yearqtr(tick_dates))
y_lvl = emp_pop_ratio_df %>% mutate(year = lubridate::year(quarter)) %>%
filter(year == 2000) %>% summarise(mean(emp_pop))
y_lvl = as.numeric(y_lvl[1,1])
plot_ly(
data = emp_pop_ratio_df,
x = ~quarter,
y = ~emp_pop,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:,.1f}%<extra></extra>"
) %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Employment-to-Population Ratio (%)",
tickformat = ".0f",
ticksuffix = "%"),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1]),
# add horizontal line
shapes = list(
list(
type = "line",
xref = "paper",
x0 = 0, x1 = 1,
y0 = y_lvl, y1 = y_lvl,
line = list(color = eig_colors[4], width = 2, dash = "dash")
)
),
# label for balance
annotations = list(
list(
xref = "paper",
x = 0.25,
y = y_lvl+0.4,
text = paste0("2000 level, before China joined the WTO = ",round(y_lvl,1),"%"),
showarrow = FALSE,
font = list(color = eig_colors[4], size = 14),
xanchor = "left",
yanchor = "middle"
)
)
)
})
output$text_employment_pop_native <- renderUI({
HTML('<p>According to Vice President J.D. Vance, the Trump administration <a href="https://www.nytimes.com/2024/10/12/magazine/jd-vance-interview.html" target="_blank"> hopes</a> to raise native-born employment in part by imposing more severe immigration restrictions and creating new jobs by restricting trade. NEC director <a href = "https://www.whitehouse.gov/articles/2025/04/sunday-shows-president-trumps-bold-vision-for-economic-prosperity/" target  "_blank"> has also said: </a>"China entered the WTO in 2000. In the 15 years that followed, real incomes declined about $1,200 cumulatively over that time … We got the cheap goods at the grocery store, but then we had fewer jobs.” The native-born employment rate currently stands at 59.4 percent. We set the target to be 64.5 percent, which is the 2000 level before China joined the WTO.</p>'
)})
## Employment Manufacturing ##
manu_df = tibble(
quarter = as.Date(as.yearqtr(time(manu_qt))),
manufacturing = as.numeric(manu_qt),
hover_label = format(as.yearqtr(quarter), "%Y Q%q")
)
output$plotly_emp_manu <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
date_range <- range(manu_df$quarter)
start_year <- lubridate::year(date_range[1])
end_year   <- lubridate::year(date_range[2])
# Add ticks
tick_years <- c(start_year,
seq((start_year %/% 5 + 1)*5, end_year %/% 5*5, by = 5))
tick_dates <- c(as.Date(paste0(tick_years, "-01-01")),
tail(date_range, 1)) %>% unique()  # Q1 of each year
tick_texts <- as.character(as.yearqtr(tick_dates))
y_lvl = manu_df %>% mutate(year = lubridate::year(quarter)) %>%
filter(year == 2000) %>% summarise(y = mean(manufacturing))
y_lvl = as.numeric(y_lvl[1,1])
plot_ly(
data = manu_df,
x = ~quarter,
y = ~manufacturing,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:,.1f}M<extra></extra>"
) %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Employment (Millions of Workers)",
tickformat = ",.0f",
ticksuffix = ""),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1]),
# add target line
shapes = list(
list(
type = "line",
xref = "paper",
x0 = 0, x1 = 1,
y0 = y_lvl, y1 = y_lvl,
line = list(color = eig_colors[4], width = 2, dash = "dash")
)
),
# add label for target
annotations = list(
list(
xref = "paper",
x = 0.27,
y = y_lvl + 0.2,
text = paste0("2000 level, before China joined the WTO = " , round(y_lvl, 1),"M"),
showarrow = FALSE,
font = list(color = eig_colors[4], size = 14),
xanchor = "left",
yanchor = "middle"
)
)
)
})
output$text_emp_manu <- renderUI({
HTML('<p>“Using trade policy to increase the number of manufacturing jobs in our Country… will help raise wages and return our country to one with a more vibrant and secure middle class,” according to the Trump administration’s <a href="https://ustr.gov/sites/default/files/files/reports/2025/President%20Trump%27s%202025%20Trade%20Policy%20Agenda.pdf" target="_blank">2025 Trade Policy Agenda,</a> which further laments that manufacturing jobs “declined from 17 million in 1993 to 12 million in 2016.”<br><br>We have set the target at 17.3 million manufacturing jobs, a level slightly below the mid-1990s peak but from just before China’s entry into the WTO — which the administration has repeatedly blamed for <a href="https://www.whitehouse.gov/fact-sheets/2025/04/fact-sheet-president-donald-j-trump-declares-national-emergency-to-increase-our-competitive-edge-protect-our-sovereignty-and-strengthen-our-national-and-economic-security/#:~:text=Large%20and%20persistent%20annual%20U.S.,base%20dependent%20on%20foreign%20adversaries." target="_blank">lower incomes</a> and <a href="https://www.whitehouse.gov/articles/2025/04/sunday-shows-president-trumps-bold-vision-for-economic-prosperity/" target="_blank">lost jobs.</a></p>'
)})
## Manufacturing Share ##
manu_share_df = tibble(
quarter = as.Date(as.yearqtr(time(manu_share))),
manufacturing_share = as.numeric(manu_share) *100,
hover_label = format(as.yearqtr(quarter), "%Y Q%q")
)
output$plotly_share_manu <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
date_range <- range(manu_share_df$quarter)
start_year <- lubridate::year(date_range[1])
end_year   <- lubridate::year(date_range[2])
tick_years <- c(start_year,
seq((start_year %/% 5 + 1)*5, end_year %/% 5*5, by = 5))
tick_dates <- c(as.Date(paste0(tick_years, "-01-01")),
tail(date_range, 1)) %>% unique()  # Q1 of each year
tick_texts <- as.character(as.yearqtr(tick_dates))
y_lvl = manu_share_df %>% mutate(year = lubridate::year(quarter)) %>%
filter(year == 2000) %>% summarise(y = mean(manufacturing_share))
y_lvl = as.numeric(y_lvl[1,1])
plot_ly(
data = manu_share_df,
x = ~quarter,
y = ~manufacturing_share,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:,.1f}%<extra></extra>") %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Share of Private-Sector Workers (%)",
tickformat = ".0f",
ticksuffix = "%"),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1])
# add target line
# shapes = list(
#    list(
#      type = "line",
#      xref = "paper",
#      x0 = 0, x1 = 1,
#      y0 = y_lvl, y1 = y_lvl,
#      line = list(color = eig_colors[4], width = 2, dash = "dash")
#    )
#  ),
# add label for target
# annotations = list(
#    list(
#      xref = "paper",
#      x = 0.29,
#      y = y_lvl + 0.3,
#      text = paste0("2000 level, before China joined the WTO = " , round(y_lvl, 1),"%"),
#      showarrow = FALSE,
#      font = list(color = eig_colors[4], size = 14),
#      xanchor = "left",
#      yanchor = "middle"
#    )
#  )
)
})
output$text_share_manu <- renderUI({
HTML('<p>“Using trade policy to increase the number of manufacturing jobs in our Country… will help raise wages and return our country to one with a more vibrant and secure middle class,” according to the Trump administration’s <href="https://ustr.gov/sites/default/files/files/reports/2025/President%20Trump%27s%202025%20Trade%20Policy%20Agenda.pdf" target="_blank">2025 Trade Policy Agenda.</a><br><br>The administration has not set an explicit target for the manufacturing share of total jobs in the labor force, but we include the indicator because we think it will be worth monitoring for a sustained reversal of its decades-long decline.</p>'
)})
## Employment, motor vehicles and parts ##
motor_df = tibble(
quarter = as.Date(as.yearqtr(time(motor_qt))),
motor_level = as.numeric(motor_qt),
hover_label = format(as.yearqtr(quarter), "%Y Q%q")
)
output$plotly_motor_emp <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
date_range <- range(motor_df$quarter)
start_year <- lubridate::year(date_range[1])
end_year   <- lubridate::year(date_range[2])
tick_years <- c(start_year,
seq((start_year %/% 5 + 1)*5, end_year %/% 5*5, by = 5))
tick_dates <- c(as.Date(paste0(tick_years, "-01-01")),
tail(date_range, 1)) %>% unique()  # Q1 of each year
tick_texts <- as.character(as.yearqtr(tick_dates))
y_lvl = motor_df %>% mutate(year = lubridate::year(quarter)) %>%
filter(year == 2000) %>% summarise(y = mean(motor_level))
y_lvl = as.numeric(y_lvl[1,1])
plot_ly(
data = motor_df,
x = ~quarter,
y = ~motor_level,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:,.1f}M<extra></extra>") %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Employment (Millions of Workers)",
tickformat = ".1f",
ticksuffix = ""),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1]),
# add target line
shapes = list(
list(
type = "line",
xref = "paper",
x0 = 0, x1 = 1,
y0 = y_lvl, y1 = y_lvl,
line = list(color = eig_colors[4], width = 2, dash = "dash")
)
),
# add label for target
annotations = list(
list(
xref = "paper",
x = 0.33,
y = y_lvl + 0.025,
text = paste0("2000 level, before China joined the WTO = " , round(y_lvl, 1),"M"),
showarrow = FALSE,
font = list(color = eig_colors[4], size = 14),
xanchor = "left",
yanchor = "middle"
)
)
)
})
output$text_motor_emp <- renderUI({
HTML('<p>The auto sector is a particular focus of President Trump’s trade agenda, which <a href="https://www.whitehouse.gov/fact-sheets/2025/04/fact-sheet-president-donald-j-trump-declares-national-emergency-to-increase-our-competitive-edge-protect-our-sovereignty-and-strengthen-our-national-and-economic-security/#:~:text=Large%20and%20persistent%20annual%20U.S.,base%20dependent%20on%20foreign%20adversaries." target="_blank">seeks</a> “better-paying American jobs making beautiful American-made cars.” And, for example, among the reasons given for deploying tariffs is to counter the “variety of non-tariff barriers that impede access to the Japanese and Korean automotive markets, including non-acceptance of certain U.S. standards, duplicative testing and certification requirements, and transparency issues.”<br><br>To be consistent with total manufacturing employment, we have set the target for auto employment at the level from just before China’s entry into the WTO, or 1.3 million auto manufacturing jobs.
</p>'
)})
## Motor vehicles and parts share of private employment ##
motor_share_df = tibble(
quarter = as.Date(as.yearqtr(time(motor_share))),
motor_share = as.numeric(motor_share)*100,
hover_label = format(as.yearqtr(quarter), "%Y Q%q")
)
output$plotly_motor_share <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
date_range <- range(motor_share_df$quarter)
start_year <- lubridate::year(date_range[1])
end_year   <- lubridate::year(date_range[2])
tick_years <- c(start_year,
seq((start_year %/% 5 + 1)*5, end_year %/% 5*5, by = 5))
tick_dates <- c(as.Date(paste0(tick_years, "-01-01")),
tail(date_range, 1)) %>% unique()  # Q1 of each year
tick_texts <- as.character(as.yearqtr(tick_dates))
y_lvl = motor_share_df %>% mutate(year = lubridate::year(quarter)) %>%
filter(year == 2000) %>% summarise(y = mean(motor_share))
y_lvl = as.numeric(y_lvl[1,1])
plot_ly(
data = motor_share_df,
x = ~quarter,
y = ~motor_share,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:,.1f}%<extra></extra>") %>%
layout(
xaxis = list(title = "Time (Quarterly)",
tickvals = tick_dates,
ticktext = tick_texts,
hoverformat = "%Y Q%q",
range = c(tick_dates[1], tick_dates[length(tick_dates)])),
yaxis = list(title = "Share of Private-Sector Workers (%)",
tickformat = ".1f",
ticksuffix = "%"),
hovermode = "closest",
hoverlabel = list(bgcolor = eig_colors[1])
# add target line
#      shapes = list(
#        list(
#          type = "line",
#          xref = "paper",
#          x0 = 0, x1 = 1,
#          y0 = y_lvl, y1 = y_lvl,
#          line = list(color = eig_colors[4], width = 2, dash = "dash")
#        )
#      ),
# add label for target
#     annotations = list(
#        list(
#          xref = "paper",
#          x = 0.31,
#          y = y_lvl + 0.02,
#          text = paste0("2000 level, before China joined the WTO = " , round(y_lvl, 1),"%"),
#          showarrow = FALSE,
#          font = list(color = eig_colors[4], size = 14),
#          xanchor = "left",
#          yanchor = "middle"
#        )
#      )
)
})
output$text_motor_share <- renderUI({
HTML('<p>The auto sector is a particular focus of President Trump’s trade agenda, which <a href="https://www.whitehouse.gov/fact-sheets/2025/04/fact-sheet-president-donald-j-trump-declares-national-emergency-to-increase-our-competitive-edge-protect-our-sovereignty-and-strengthen-our-national-and-economic-security/#:~:text=Large%20and%20persistent%20annual%20U.S.,base%20dependent%20on%20foreign%20adversaries." target="_blank">seeks</a> “better-paying American jobs making beautiful American-made cars.” And, for example, among the reasons given for deploying tariffs is to counter the “variety of non-tariff barriers that impede access to the Japanese and Korean automotive markets, including non-acceptance of certain U.S. standards, duplicative testing and certification requirements, and transparency issues.”<br><br>The administration has not established a set target for either the total manufacturing share of U.S. jobs or the equivalent share for auto jobs, so we have not added one. But we will monitor this indicator for any meaningful increase.</p>'
)})
## Employment in manufacturing, counties most affected by the "China shock"  ##
china_shock_df <- tibble(year = time(china_shock_yr),
cs_manu_emp = as.numeric(china_shock_yr),
hover_label = as.character(year))
output$plotly_china_shock <- renderPlotly({
# Dynamically generate tick dates: Q1 every 5 years
start_year <- china_shock_df$year[1]
end_year   <- china_shock_df$year[nrow(china_shock_df)]
tick_years <- c(seq(start_year, end_year, by = 5), end_year)
tick_texts <- as.character(tick_years)
y_lvl <- china_shock_df %>% filter(year == 2000) %>% .$cs_manu_emp
plot_ly(
data = china_shock_df,
x = ~year,
y = ~cs_manu_emp,
type = 'scatter',
mode = 'lines',
line = list(color = eig_colors[1], width = 2),
text = ~hover_label,
hovertemplate = "%{x}: %{y:,.1f}K<extra></extra>"
) %>%
layout(
xaxis = list(title = "Time (Annual)",
tickvals = tick_years,
hoverformat = "%Y Q%q",
range = c(tick_years[1], tick_years[length(tick_years)])),
yaxis = list(title = "Employment (Thousands of Workers)",
tickformat = ".0f",
ticksuffix = ""),
hovermode = "closest",
# add target line
shapes = list(
list(
type = "line",
xref = "paper",
x0 = 0, x1 = 1,
y0 = y_lvl, y1 = y_lvl,
line = list(color = eig_colors[4], width = 2, dash = "dash")
)
),
# add label for target
annotations = list(
list(
xref = "paper",
x = 0.29,
y = y_lvl + 8.5,
text = paste0("2000 level, before China joined the WTO = " , round(y_lvl, 1),"K"),
showarrow = FALSE,
font = list(color = eig_colors[4], size = 14),
xanchor = "left",
yanchor = "middle"
)
)
)
})
output$text_china_shock <- renderUI({
HTML('<p>As <a href="https://www.nber.org/papers/w21906" target="_blank">estimated</a> by economists David Autor, David Dorn, and Gordon H. Hanson, manufacturing employment in the 145 counties most impacted by trade with China was 473 thousand jobs as of 2022, the most recent available data.
We have set the target at 649 thousand jobs, the total employment in these counties just before China joined the WTO in 2001. The administration has repeatedly blamed China’s entry into the WTO for <a href="https://www.whitehouse.gov/fact-sheets/2025/04/fact-sheet-president-donald-j-trump-declares-national-emergency-to-increase-our-competitive-edge-protect-our-sovereignty-and-strengthen-our-national-and-economic-security/#:~:text=Large%20and%20persistent%20annual%20U.S.,base%20dependent%20on%20foreign%20adversaries." target="_blank">lower incomes</a> and <a href="https://www.whitehouse.gov/articles/2025/04/sunday-shows-president-trumps-bold-vision-for-economic-prosperity/" target="_blank">lost jobs</a> in the United States.</p>'
)})
}
shinyApp(ui = ui, server = server)
